{
  "annotations": {
    "list": [
      {
        "builtIn": 1,
        "datasource": "-- Grafana --",
        "enable": true,
        "hide": true,
        "iconColor": "rgba(0, 211, 255, 1)",
        "name": "Annotations & Alerts",
        "type": "dashboard"
      }
    ]
  },
  "editable": true,
  "gnetId": null,
  "graphTooltip": 0,
  "id": null,
  "links": [],
  "panels": [

    {
      "collapsed": false,
      "gridPos": { "h": 1, "w": 24, "x": 0, "y": 0 },
      "id": 100,
      "title": "Overview",
      "type": "row"
    },

    {
      "datasource": "InfluxDB-k6",
      "fieldConfig": {
        "defaults": {
          "color": { "mode": "palette-classic" },
          "custom": {
            "axisLabel": "", "axisPlacement": "auto", "barAlignment": 0,
            "drawStyle": "line", "fillOpacity": 10, "gradientMode": "none",
            "hideFrom": { "tooltip": false, "viz": false, "legend": false },
            "lineInterpolation": "linear", "lineWidth": 2, "pointSize": 5,
            "scaleDistribution": { "type": "linear" },
            "showPoints": "never", "spanNulls": true
          },
          "mappings": [],
          "thresholds": { "mode": "absolute", "steps": [{ "color": "green", "value": null }] },
          "unit": "short"
        }
      },
      "gridPos": { "h": 8, "w": 12, "x": 0, "y": 1 },
      "id": 1,
      "options": {
        "legend": { "calcs": ["mean", "max"], "displayMode": "table", "placement": "bottom" },
        "tooltip": { "mode": "multi" }
      },
      "targets": [
        {
          "groupBy": [{ "params": ["$__interval"], "type": "time" }],
          "measurement": "vus", "orderByTime": "ASC", "policy": "default",
          "refId": "A", "resultFormat": "time_series",
          "select": [[{ "params": ["value"], "type": "field" }, { "params": [], "type": "mean" }]],
          "tags": []
        }
      ],
      "title": "Virtual Users",
      "type": "timeseries"
    },

    {
      "datasource": "InfluxDB-k6",
      "fieldConfig": {
        "defaults": {
          "color": { "mode": "palette-classic" },
          "custom": {
            "axisLabel": "req/s", "axisPlacement": "auto", "barAlignment": 0,
            "drawStyle": "line", "fillOpacity": 10, "gradientMode": "none",
            "hideFrom": { "tooltip": false, "viz": false, "legend": false },
            "lineInterpolation": "linear", "lineWidth": 2, "pointSize": 5,
            "scaleDistribution": { "type": "linear" },
            "showPoints": "never", "spanNulls": true
          },
          "mappings": [],
          "thresholds": { "mode": "absolute", "steps": [{ "color": "green", "value": null }] },
          "unit": "reqps"
        }
      },
      "gridPos": { "h": 8, "w": 12, "x": 12, "y": 1 },
      "id": 10,
      "options": {
        "legend": { "calcs": ["mean", "max"], "displayMode": "table", "placement": "bottom" },
        "tooltip": { "mode": "multi" }
      },
      "targets": [
        {
          "groupBy": [{ "params": ["$__interval"], "type": "time" }],
          "measurement": "http_reqs", "orderByTime": "ASC", "policy": "default",
          "refId": "A", "resultFormat": "time_series",
          "select": [[
            { "params": ["value"], "type": "field" },
            { "params": [], "type": "sum" },
            { "params": ["1s"], "type": "non_negative_derivative" }
          ]],
          "tags": []
        }
      ],
      "title": "HTTP Requests Rate",
      "type": "timeseries"
    },

    {
      "collapsed": false,
      "gridPos": { "h": 1, "w": 24, "x": 0, "y": 9 },
      "id": 101,
      "title": "Health Rates",
      "type": "row"
    },

    {
      "datasource": "InfluxDB-k6",
      "fieldConfig": {
        "defaults": {
          "color": { "mode": "thresholds" },
          "mappings": [],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              { "color": "red", "value": null },
              { "color": "yellow", "value": 0.9 },
              { "color": "green", "value": 0.95 }
            ]
          },
          "unit": "percentunit",
          "noValue": "N/A"
        }
      },
      "gridPos": { "h": 4, "w": 8, "x": 0, "y": 10 },
      "id": 2,
      "options": {
        "colorMode": "background",
        "graphMode": "none",
        "justifyMode": "center",
        "orientation": "horizontal",
        "reduceOptions": { "calcs": ["mean"], "fields": "", "values": false },
        "text": { "titleSize": 14, "valueSize": 28 },
        "textMode": "auto"
      },
      "targets": [
        {
          "groupBy": [{ "params": ["$__interval"], "type": "time" }, { "params": ["null"], "type": "fill" }],
          "measurement": "iteration_success_rate", "orderByTime": "ASC", "policy": "default",
          "refId": "A", "resultFormat": "time_series",
          "select": [[{ "params": ["value"], "type": "field" }, { "params": [], "type": "mean" }]],
          "tags": []
        }
      ],
      "title": "Iteration Success Rate",
      "description": "Rate of iterations that completed all steps without any error or network failure. Target: >95%",
      "type": "stat"
    },

    {
      "datasource": "InfluxDB-k6",
      "fieldConfig": {
        "defaults": {
          "color": { "mode": "thresholds" },
          "mappings": [
            { "type": "special", "options": { "match": "null", "result": { "text": "N/A", "color": "green" } } }
          ],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              { "color": "green", "value": null },
              { "color": "yellow", "value": 0.02 },
              { "color": "red", "value": 0.05 }
            ]
          },
          "unit": "percentunit",
          "noValue": "N/A"
        }
      },
      "gridPos": { "h": 4, "w": 8, "x": 8, "y": 10 },
      "id": 12,
      "options": {
        "colorMode": "background",
        "graphMode": "none",
        "justifyMode": "center",
        "orientation": "horizontal",
        "reduceOptions": { "calcs": ["mean"], "fields": "", "values": false },
        "text": { "titleSize": 14, "valueSize": 28 },
        "textMode": "auto"
      },
      "targets": [
        {
          "groupBy": [{ "params": ["$__interval"], "type": "time" }],
          "measurement": "poll_network_error_rate", "orderByTime": "ASC", "policy": "default",
          "refId": "A", "resultFormat": "time_series",
          "select": [[{ "params": ["value"], "type": "field" }, { "params": [], "type": "mean" }]],
          "tags": []
        }
      ],
      "title": "Poll Network Error Rate",
      "description": "Rate of poll attempts that received no HTTP response (status=0) — timeouts and connection errors. Target: <5%",
      "type": "stat"
    },

    {
      "datasource": "InfluxDB-k6",
      "fieldConfig": {
        "defaults": {
          "color": { "mode": "thresholds" },
          "mappings": [
            { "type": "special", "options": { "match": "null", "result": { "text": "N/A", "color": "green" } } }
          ],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              { "color": "green", "value": null },
              { "color": "yellow", "value": 0.02 },
              { "color": "red", "value": 0.05 }
            ]
          },
          "unit": "percentunit",
          "noValue": "N/A"
        }
      },
      "gridPos": { "h": 4, "w": 8, "x": 16, "y": 10 },
      "id": 3,
      "options": {
        "colorMode": "background",
        "graphMode": "none",
        "justifyMode": "center",
        "orientation": "horizontal",
        "reduceOptions": { "calcs": ["mean"], "fields": "", "values": false },
        "text": { "titleSize": 14, "valueSize": 28 },
        "textMode": "auto"
      },
      "targets": [
        {
          "groupBy": [{ "params": ["$__interval"], "type": "time" }, { "params": ["null"], "type": "fill" }],
          "measurement": "job_timeout_rate", "orderByTime": "ASC", "policy": "default",
          "refId": "A", "resultFormat": "time_series",
          "select": [[{ "params": ["value"], "type": "field" }, { "params": [], "type": "mean" }]],
          "tags": []
        }
      ],
      "title": "Job Deadline Exceeded Rate",
      "description": "Rate of poll loops that exhausted POLL_MAX_SECONDS without the job completing. Fires only when the job itself never finishes. Target: <5%",
      "type": "stat"
    },

    {
      "datasource": "InfluxDB-k6",
      "fieldConfig": {
        "defaults": {
          "color": { "mode": "thresholds" },
          "mappings": [
            { "type": "special", "options": { "match": "null", "result": { "text": "N/A", "color": "green" } } }
          ],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              { "color": "green", "value": null },
              { "color": "yellow", "value": 0.005 },
              { "color": "red", "value": 0.01 }
            ]
          },
          "unit": "percentunit",
          "noValue": "N/A"
        }
      },
      "gridPos": { "h": 4, "w": 6, "x": 0, "y": 14 },
      "id": 14,
      "options": {
        "colorMode": "background",
        "graphMode": "none",
        "justifyMode": "center",
        "orientation": "horizontal",
        "reduceOptions": { "calcs": ["mean"], "fields": "", "values": false },
        "text": { "titleSize": 14, "valueSize": 28 },
        "textMode": "auto"
      },
      "targets": [
        {
          "groupBy": [{ "params": ["$__interval"], "type": "time" }, { "params": ["null"], "type": "fill" }],
          "measurement": "upload_failed_rate", "orderByTime": "ASC", "policy": "default",
          "refId": "A", "resultFormat": "time_series",
          "select": [[{ "params": ["value"], "type": "field" }, { "params": [], "type": "mean" }]],
          "tags": []
        }
      ],
      "title": "Upload Failed Rate",
      "description": "Rate of POST /api/upload/file responses that were not 200. Target: <1%",
      "type": "stat"
    },

    {
      "datasource": "InfluxDB-k6",
      "fieldConfig": {
        "defaults": {
          "color": { "mode": "thresholds" },
          "mappings": [
            { "type": "special", "options": { "match": "null", "result": { "text": "N/A", "color": "green" } } }
          ],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              { "color": "green", "value": null },
              { "color": "yellow", "value": 0.005 },
              { "color": "red", "value": 0.01 }
            ]
          },
          "unit": "percentunit",
          "noValue": "N/A"
        }
      },
      "gridPos": { "h": 4, "w": 6, "x": 6, "y": 14 },
      "id": 8,
      "options": {
        "colorMode": "background",
        "graphMode": "none",
        "justifyMode": "center",
        "orientation": "horizontal",
        "reduceOptions": { "calcs": ["mean"], "fields": "", "values": false },
        "text": { "titleSize": 14, "valueSize": 28 },
        "textMode": "auto"
      },
      "targets": [
        {
          "groupBy": [{ "params": ["$__interval"], "type": "time" }, { "params": ["null"], "type": "fill" }],
          "measurement": "timeline_save_failed_rate", "orderByTime": "ASC", "policy": "default",
          "refId": "A", "resultFormat": "time_series",
          "select": [[{ "params": ["value"], "type": "field" }, { "params": [], "type": "mean" }]],
          "tags": []
        }
      ],
      "title": "Save Failed Rate",
      "description": "Rate of POST /api/timeline responses that were not 201. Target: <1%",
      "type": "stat"
    },

    {
      "datasource": "InfluxDB-k6",
      "fieldConfig": {
        "defaults": {
          "color": { "mode": "thresholds" },
          "mappings": [
            { "type": "special", "options": { "match": "null", "result": { "text": "N/A", "color": "green" } } }
          ],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              { "color": "green", "value": null },
              { "color": "yellow", "value": 0.005 },
              { "color": "red", "value": 0.01 }
            ]
          },
          "unit": "percentunit",
          "noValue": "N/A"
        }
      },
      "gridPos": { "h": 4, "w": 6, "x": 12, "y": 14 },
      "id": 9,
      "options": {
        "colorMode": "background",
        "graphMode": "none",
        "justifyMode": "center",
        "orientation": "horizontal",
        "reduceOptions": { "calcs": ["mean"], "fields": "", "values": false },
        "text": { "titleSize": 14, "valueSize": 28 },
        "textMode": "auto"
      },
      "targets": [
        {
          "groupBy": [{ "params": ["$__interval"], "type": "time" }, { "params": ["null"], "type": "fill" }],
          "measurement": "timeline_update_failed_rate", "orderByTime": "ASC", "policy": "default",
          "refId": "A", "resultFormat": "time_series",
          "select": [[{ "params": ["value"], "type": "field" }, { "params": [], "type": "mean" }]],
          "tags": []
        }
      ],
      "title": "Update Failed Rate",
      "description": "Rate of PUT /api/timeline/:id responses that were not 200. Target: <1%",
      "type": "stat"
    },

    {
      "datasource": "InfluxDB-k6",
      "fieldConfig": {
        "defaults": {
          "color": { "mode": "thresholds" },
          "mappings": [
            { "type": "special", "options": { "match": "null", "result": { "text": "N/A", "color": "green" } } }
          ],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              { "color": "green", "value": null },
              { "color": "yellow", "value": 0.005 },
              { "color": "red", "value": 0.01 }
            ]
          },
          "unit": "percentunit",
          "noValue": "N/A"
        }
      },
      "gridPos": { "h": 4, "w": 6, "x": 18, "y": 14 },
      "id": 15,
      "options": {
        "colorMode": "background",
        "graphMode": "none",
        "justifyMode": "center",
        "orientation": "horizontal",
        "reduceOptions": { "calcs": ["mean"], "fields": "", "values": false },
        "text": { "titleSize": 14, "valueSize": 28 },
        "textMode": "auto"
      },
      "targets": [
        {
          "groupBy": [{ "params": ["$__interval"], "type": "time" }, { "params": ["null"], "type": "fill" }],
          "measurement": "delete_failed_rate", "orderByTime": "ASC", "policy": "default",
          "refId": "A", "resultFormat": "time_series",
          "select": [[{ "params": ["value"], "type": "field" }, { "params": [], "type": "mean" }]],
          "tags": []
        }
      ],
      "title": "Delete Failed Rate",
      "description": "Rate of DELETE /api/timeline/:id responses that were not 200. Target: <1%",
      "type": "stat"
    },

    {
      "collapsed": false,
      "gridPos": { "h": 1, "w": 24, "x": 0, "y": 18 },
      "id": 102,
      "title": "Job Processing",
      "type": "row"
    },

    {
      "datasource": "InfluxDB-k6",
      "fieldConfig": {
        "defaults": {
          "color": { "mode": "palette-classic" },
          "custom": {
            "axisLabel": "Duration (ms)", "axisPlacement": "auto", "barAlignment": 0,
            "drawStyle": "line", "fillOpacity": 10, "gradientMode": "none",
            "hideFrom": { "tooltip": false, "viz": false, "legend": false },
            "lineInterpolation": "linear", "lineWidth": 2, "pointSize": 5,
            "scaleDistribution": { "type": "linear" },
            "showPoints": "never", "spanNulls": true
          },
          "mappings": [],
          "thresholds": {
            "mode": "absolute",
            "steps": [{ "color": "green", "value": null }, { "color": "red", "value": 3000 }]
          },
          "unit": "ms"
        }
      },
      "gridPos": { "h": 8, "w": 12, "x": 0, "y": 19 },
      "id": 4,
      "options": {
        "legend": { "calcs": ["mean", "max", "last"], "displayMode": "table", "placement": "bottom" },
        "tooltip": { "mode": "multi" }
      },
      "targets": [
        {
          "alias": "p95",
          "groupBy": [{ "params": ["$__interval"], "type": "time" }],
          "measurement": "job_time_to_done_ms", "orderByTime": "ASC", "policy": "default",
          "refId": "A", "resultFormat": "time_series",
          "select": [[{ "params": ["value"], "type": "field" }, { "params": [95], "type": "percentile" }]],
          "tags": []
        },
        {
          "alias": "avg",
          "groupBy": [{ "params": ["$__interval"], "type": "time" }],
          "measurement": "job_time_to_done_ms", "orderByTime": "ASC", "policy": "default",
          "refId": "B", "resultFormat": "time_series",
          "select": [[{ "params": ["value"], "type": "field" }, { "params": [], "type": "mean" }]],
          "tags": []
        }
      ],
      "title": "Job Processing Time — upload to done (ms)",
      "description": "End-to-end time from PDF upload accepted to job status=done. Includes queue wait + worker processing. Target p95 < 3000ms",
      "type": "timeseries"
    },

    {
      "datasource": "InfluxDB-k6",
      "fieldConfig": {
        "defaults": {
          "color": { "mode": "palette-classic" },
          "custom": {
            "axisLabel": "Poll attempts per job", "axisPlacement": "auto", "barAlignment": 0,
            "drawStyle": "line", "fillOpacity": 10, "gradientMode": "none",
            "hideFrom": { "tooltip": false, "viz": false, "legend": false },
            "lineInterpolation": "linear", "lineWidth": 2, "pointSize": 5,
            "scaleDistribution": { "type": "linear" },
            "showPoints": "never", "spanNulls": true
          },
          "mappings": [],
          "thresholds": { "mode": "absolute", "steps": [{ "color": "green", "value": null }] },
          "unit": "short"
        }
      },
      "gridPos": { "h": 8, "w": 12, "x": 12, "y": 19 },
      "id": 11,
      "options": {
        "legend": { "calcs": ["mean", "max", "last"], "displayMode": "table", "placement": "bottom" },
        "tooltip": { "mode": "multi" }
      },
      "targets": [
        {
          "alias": "p95",
          "groupBy": [{ "params": ["$__interval"], "type": "time" }],
          "measurement": "polls_per_job", "orderByTime": "ASC", "policy": "default",
          "refId": "A", "resultFormat": "time_series",
          "select": [[{ "params": ["value"], "type": "field" }, { "params": [95], "type": "percentile" }]],
          "tags": []
        },
        {
          "alias": "avg",
          "groupBy": [{ "params": ["$__interval"], "type": "time" }],
          "measurement": "polls_per_job", "orderByTime": "ASC", "policy": "default",
          "refId": "B", "resultFormat": "time_series",
          "select": [[{ "params": ["value"], "type": "field" }, { "params": [], "type": "mean" }]],
          "tags": []
        }
      ],
      "title": "Poll Attempts Per Job",
      "description": "Number of GET /api/jobs/:jobId requests made before a job reached status=done. Higher values indicate slower worker processing or Redis cache delays.",
      "type": "timeseries"
    },

    {
      "collapsed": false,
      "gridPos": { "h": 1, "w": 24, "x": 0, "y": 27 },
      "id": 103,
      "title": "Endpoint Latency",
      "type": "row"
    },

    {
      "datasource": "InfluxDB-k6",
      "fieldConfig": {
        "defaults": {
          "color": { "mode": "palette-classic" },
          "custom": {
            "axisLabel": "Duration (ms)", "axisPlacement": "auto", "barAlignment": 0,
            "drawStyle": "line", "fillOpacity": 10, "gradientMode": "none",
            "hideFrom": { "tooltip": false, "viz": false, "legend": false },
            "lineInterpolation": "linear", "lineWidth": 2, "pointSize": 5,
            "scaleDistribution": { "type": "linear" },
            "showPoints": "never", "spanNulls": true
          },
          "mappings": [],
          "thresholds": { "mode": "absolute", "steps": [{ "color": "green", "value": null }] },
          "unit": "ms"
        }
      },
      "gridPos": { "h": 8, "w": 24, "x": 0, "y": 28 },
      "id": 5,
      "options": {
        "legend": { "calcs": ["mean", "max", "last"], "displayMode": "table", "placement": "bottom" },
        "tooltip": { "mode": "multi" }
      },
      "targets": [
        {
          "alias": "Upload PDF (p95)",
          "groupBy": [{ "params": ["$__interval"], "type": "time" }],
          "measurement": "http_req_duration", "orderByTime": "ASC", "policy": "default",
          "refId": "A", "resultFormat": "time_series",
          "select": [[{ "params": ["value"], "type": "field" }, { "params": [95], "type": "percentile" }]],
          "tags": [{ "key": "name", "operator": "=", "value": "POST /api/upload/file" }]
        },
        {
          "alias": "Poll Job (p95)",
          "groupBy": [{ "params": ["$__interval"], "type": "time" }],
          "measurement": "http_req_duration", "orderByTime": "ASC", "policy": "default",
          "refId": "B", "resultFormat": "time_series",
          "select": [[{ "params": ["value"], "type": "field" }, { "params": [95], "type": "percentile" }]],
          "tags": [{ "key": "name", "operator": "=", "value": "GET /api/jobs/:jobId" }]
        },
        {
          "alias": "Save Timeline (p95)",
          "groupBy": [{ "params": ["$__interval"], "type": "time" }],
          "measurement": "http_req_duration", "orderByTime": "ASC", "policy": "default",
          "refId": "C", "resultFormat": "time_series",
          "select": [[{ "params": ["value"], "type": "field" }, { "params": [95], "type": "percentile" }]],
          "tags": [{ "key": "name", "operator": "=", "value": "POST /api/timeline" }]
        },
        {
          "alias": "Update Timeline (p95)",
          "groupBy": [{ "params": ["$__interval"], "type": "time" }],
          "measurement": "http_req_duration", "orderByTime": "ASC", "policy": "default",
          "refId": "D", "resultFormat": "time_series",
          "select": [[{ "params": ["value"], "type": "field" }, { "params": [95], "type": "percentile" }]],
          "tags": [{ "key": "name", "operator": "=", "value": "PUT /api/timeline/:id" }]
        },
        {
          "alias": "Get Timeline (p95)",
          "groupBy": [{ "params": ["$__interval"], "type": "time" }],
          "measurement": "http_req_duration", "orderByTime": "ASC", "policy": "default",
          "refId": "E", "resultFormat": "time_series",
          "select": [[{ "params": ["value"], "type": "field" }, { "params": [95], "type": "percentile" }]],
          "tags": [{ "key": "name", "operator": "=", "value": "GET /api/timeline/:id" }]
        },
        {
          "alias": "Delete Timeline (p95)",
          "groupBy": [{ "params": ["$__interval"], "type": "time" }],
          "measurement": "http_req_duration", "orderByTime": "ASC", "policy": "default",
          "refId": "F", "resultFormat": "time_series",
          "select": [[{ "params": ["value"], "type": "field" }, { "params": [95], "type": "percentile" }]],
          "tags": [{ "key": "name", "operator": "=", "value": "DELETE /api/timeline/:id" }]
        }
      ],
      "title": "Endpoint Latency p95 — all routes",
      "description": "p95 response time per endpoint. Only includes requests that received an HTTP response (status > 0). Timed-out requests are excluded by k6 from http_req_duration.",
      "type": "timeseries"
    },

    {
      "collapsed": false,
      "gridPos": { "h": 1, "w": 24, "x": 0, "y": 36 },
      "id": 104,
      "title": "Poll Status Breakdown",
      "type": "row"
    },

    {
      "datasource": "InfluxDB-k6",
      "fieldConfig": {
        "defaults": {
          "color": { "mode": "palette-classic" },
          "custom": {
            "axisLabel": "cumulative count", "axisPlacement": "auto", "barAlignment": 0,
            "drawStyle": "line", "fillOpacity": 10, "gradientMode": "none",
            "hideFrom": { "tooltip": false, "viz": false, "legend": false },
            "lineInterpolation": "linear", "lineWidth": 2, "pointSize": 5,
            "scaleDistribution": { "type": "linear" },
            "showPoints": "never", "spanNulls": true
          },
          "mappings": [],
          "thresholds": { "mode": "absolute", "steps": [{ "color": "green", "value": null }] },
          "unit": "short"
        }
      },
      "gridPos": { "h": 8, "w": 12, "x": 0, "y": 37 },
      "id": 7,
      "options": {
        "legend": { "calcs": ["sum", "last"], "displayMode": "table", "placement": "bottom" },
        "tooltip": { "mode": "multi" }
      },
      "targets": [
        {
          "alias": "200 OK (done)",
          "groupBy": [{ "params": ["$__interval"], "type": "time" }],
          "measurement": "poll_200_count", "orderByTime": "ASC", "policy": "default",
          "refId": "A", "resultFormat": "time_series",
          "select": [[{ "params": ["value"], "type": "field" }, { "params": [], "type": "sum" }]],
          "tags": []
        },
        {
          "alias": "410 Gone / Not Ready",
          "groupBy": [{ "params": ["$__interval"], "type": "time" }],
          "measurement": "poll_410_count", "orderByTime": "ASC", "policy": "default",
          "refId": "B", "resultFormat": "time_series",
          "select": [[{ "params": ["value"], "type": "field" }, { "params": [], "type": "sum" }]],
          "tags": []
        },
        {
          "alias": "404 Not Found",
          "groupBy": [{ "params": ["$__interval"], "type": "time" }],
          "measurement": "poll_404_count", "orderByTime": "ASC", "policy": "default",
          "refId": "C", "resultFormat": "time_series",
          "select": [[{ "params": ["value"], "type": "field" }, { "params": [], "type": "sum" }]],
          "tags": []
        },
        {
          "alias": "Job Deadline Exceeded",
          "groupBy": [{ "params": ["$__interval"], "type": "time" }],
          "measurement": "poll_timeout_count", "orderByTime": "ASC", "policy": "default",
          "refId": "D", "resultFormat": "time_series",
          "select": [[{ "params": ["value"], "type": "field" }, { "params": [], "type": "sum" }]],
          "tags": []
        },
        {
          "alias": "Network Error / Timeout (status=0)",
          "groupBy": [{ "params": ["$__interval"], "type": "time" }],
          "measurement": "poll_network_error_count", "orderByTime": "ASC", "policy": "default",
          "refId": "E", "resultFormat": "time_series",
          "select": [[{ "params": ["value"], "type": "field" }, { "params": [], "type": "sum" }]],
          "tags": []
        },
        {
          "alias": "Other (unexpected status)",
          "groupBy": [{ "params": ["$__interval"], "type": "time" }],
          "measurement": "poll_other_count", "orderByTime": "ASC", "policy": "default",
          "refId": "F", "resultFormat": "time_series",
          "select": [[{ "params": ["value"], "type": "field" }, { "params": [], "type": "sum" }]],
          "tags": []
        }
      ],
      "title": "Poll Status Breakdown — cumulative counts",
      "description": "Cumulative count of each poll response type over the run. 'Network Error / Timeout' = status=0, meaning no HTTP response was received. 'Job Deadline Exceeded' = poll loop ran out of time (POLL_MAX_SECONDS).",
      "type": "timeseries"
    },

    {
      "datasource": "InfluxDB-k6",
      "fieldConfig": {
        "defaults": {
          "color": { "mode": "palette-classic" },
          "custom": {
            "axisLabel": "events/s", "axisPlacement": "auto", "barAlignment": 0,
            "drawStyle": "bars", "fillOpacity": 80, "gradientMode": "none",
            "hideFrom": { "tooltip": false, "viz": false, "legend": false },
            "lineInterpolation": "linear", "lineWidth": 1, "pointSize": 5,
            "scaleDistribution": { "type": "linear" },
            "showPoints": "never", "spanNulls": false,
            "stacking": { "group": "A", "mode": "normal" }
          },
          "mappings": [],
          "thresholds": { "mode": "absolute", "steps": [{ "color": "green", "value": null }] },
          "unit": "short"
        }
      },
      "gridPos": { "h": 8, "w": 12, "x": 12, "y": 37 },
      "id": 13,
      "options": {
        "legend": { "calcs": ["sum", "mean"], "displayMode": "table", "placement": "bottom" },
        "tooltip": { "mode": "multi" }
      },
      "targets": [
        {
          "alias": "200 OK (done)",
          "groupBy": [{ "params": ["$__interval"], "type": "time" }],
          "measurement": "poll_200_count", "orderByTime": "ASC", "policy": "default",
          "refId": "A", "resultFormat": "time_series",
          "select": [[{ "params": ["value"], "type": "field" }, { "params": [], "type": "sum" }, { "params": ["1s"], "type": "non_negative_derivative" }]],
          "tags": []
        },
        {
          "alias": "410 Gone / Not Ready",
          "groupBy": [{ "params": ["$__interval"], "type": "time" }],
          "measurement": "poll_410_count", "orderByTime": "ASC", "policy": "default",
          "refId": "B", "resultFormat": "time_series",
          "select": [[{ "params": ["value"], "type": "field" }, { "params": [], "type": "sum" }, { "params": ["1s"], "type": "non_negative_derivative" }]],
          "tags": []
        },
        {
          "alias": "Network Error / Timeout (status=0)",
          "groupBy": [{ "params": ["$__interval"], "type": "time" }],
          "measurement": "poll_network_error_count", "orderByTime": "ASC", "policy": "default",
          "refId": "E", "resultFormat": "time_series",
          "select": [[{ "params": ["value"], "type": "field" }, { "params": [], "type": "sum" }, { "params": ["1s"], "type": "non_negative_derivative" }]],
          "tags": []
        }
      ],
      "title": "Poll Status Rate — per second (stacked)",
      "description": "Per-second rate of poll responses by type (stacked bars). Useful for seeing when errors spike relative to successful polls.",
      "type": "timeseries"
    }

  ],
  "refresh": "5s",
  "schemaVersion": 27,
  "style": "dark",
  "tags": ["k6", "performance"],
  "templating": { "list": [] },
  "time": { "from": "now-5m", "to": "now" },
  "timepicker": {},
  "timezone": "",
  "title": "k6 Timeline Performance Test",
  "uid": "k6-timeline",
  "version": 0
}
