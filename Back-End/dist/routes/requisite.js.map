{"version":3,"file":"requisite.js","sourceRoot":"","sources":["../../routes/requisite.ts"],"names":[],"mappings":"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","sourcesContent":["import HTTP from '@Util/HTTPCodes';\nimport express, { Request, Response } from 'express';\nimport requisiteController from '@controllers/requisiteController/requisiteController';\nimport RequisiteTypes from '@controllers/requisiteController/requisite_types';\n\nconst router = express.Router();\n\nrouter.post('/create', async (req: Request, res: Response) => {\n  const { code1, code2, type } = req.body as {\n    code1: string;\n    code2: string;\n    type: RequisiteTypes.RequisiteType;\n  };\n  try {\n    // Validate input\n    if (!code1 || !code2 || !type) {\n      res.status(HTTP.BAD_REQUEST).json({\n        error: 'Invalid input. Please provide code1, and code2 as a string.',\n      });\n      return;\n    }\n\n    // Call the service function\n    const newRequisite = await requisiteController.createRequisite(\n      code1,\n      code2,\n      type,\n    );\n\n    // Send success response\n    res.status(HTTP.CREATED).json({\n      message: 'Requisite created successfully.',\n      requisite: newRequisite,\n    });\n  } catch (error) {\n    // Handle errors from the service\n    if (\n      error instanceof Error &&\n      error.message === 'Requisite with this id already exists.'\n    ) {\n      res.status(HTTP.FORBIDDEN).json({ error: error.message });\n    } else {\n      const errMsg = 'Internal server error in /requisite/create';\n      console.error(errMsg, error);\n      res.status(HTTP.SERVER_ERR).json({ error: errMsg });\n    }\n  }\n});\n\nrouter.post('/read', async (req: Request, res: Response) => {\n  const { code1, code2, type } = req.body as {\n    code1: string;\n    code2?: string;\n    type?: RequisiteTypes.RequisiteType;\n  };\n\n  try {\n    // Validate input\n    if (!code1) {\n      res.status(HTTP.BAD_REQUEST).json({\n        error: 'Invalid input. Please provide code1 as a string.',\n      });\n      return;\n    }\n\n    // Call the service function\n    const requisites = await requisiteController.readRequisite(\n      code1,\n      code2,\n      type,\n    );\n\n    // Send success response\n    res.status(HTTP.OK).json({\n      message: 'Requisites read successfully.',\n      requisites, // Return the array of requisites\n    });\n  } catch (error) {\n    // Handle errors from the service\n    if (\n      error instanceof Error &&\n      error.message ===\n        'The course combination or type provided does not exist.'\n    ) {\n      res.status(HTTP.FORBIDDEN).json({ error: error.message });\n    } else {\n      const errMsg = 'Internal server error in /requisite/read';\n      console.error(errMsg, error);\n      res.status(HTTP.SERVER_ERR).json({ error: errMsg });\n    }\n  }\n});\n\nrouter.post('/update', async (req: Request, res: Response) => {\n  const { code1, code2, type } = req.body as {\n    code1: string;\n    code2: string;\n    type: RequisiteTypes.RequisiteType;\n  };\n\n  try {\n    // Validate input\n    if (!code1 || !code2 || !type) {\n      res.status(HTTP.BAD_REQUEST).json({\n        error: 'Invalid input.',\n      });\n      return;\n    }\n\n    // Call the service function\n    const updatedRequisite = await requisiteController.updateRequisite(\n      code1,\n      code2,\n      type,\n    );\n\n    // Send success response\n    res.status(HTTP.OK).json({\n      message: 'Requisite updated successfully.',\n      requisite: updatedRequisite,\n    });\n  } catch (error) {\n    // Handle errors from the service\n    if (\n      error instanceof Error &&\n      error.message === 'Requisite with this course combination does not exist.'\n    ) {\n      res.status(HTTP.FORBIDDEN).json({ error: error.message });\n    } else {\n      const errMsg = 'Internal server error in /requisite/update';\n      console.error(errMsg, error);\n      res.status(HTTP.SERVER_ERR).json({ error: errMsg });\n    }\n  }\n});\n\nrouter.post('/delete', async (req: Request, res: Response) => {\n  const { code1, code2, type } = req.body;\n\n  try {\n    // Validate input\n    if (!code1 || !code2 || !type) {\n      res.status(HTTP.BAD_REQUEST).json({\n        error: 'Invalid input.',\n      });\n      return;\n    }\n\n    // Call the service function\n    await requisiteController.deleteRequisite(code1, code2, type);\n\n    // Send success response\n    res.status(HTTP.OK).json({\n      message: 'Requisite deleted successfully.',\n    });\n  } catch (error) {\n    // Handle errors from the service\n    if (\n      error instanceof Error &&\n      error.message === 'Requisite with this course combination does not exist.'\n    ) {\n      res.status(HTTP.FORBIDDEN).json({ error: error.message });\n    } else {\n      const errMsg = 'Internal server error in /requisite/delete';\n      console.error(errMsg, error);\n      res.status(HTTP.SERVER_ERR).json({ error: errMsg });\n    }\n  }\n});\n\nexport default router;\n"]}