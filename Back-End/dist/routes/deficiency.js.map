{"version":3,"file":"deficiency.js","sourceRoot":"","sources":["../../routes/deficiency.ts"],"names":[],"mappings":"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","sourcesContent":["import HTTP from '@Util/HTTPCodes';\nimport express, { Request, Response } from 'express';\nimport deficiencyController from '@controllers/deficiencyController/deficiencyController';\n\nconst router = express.Router();\n\nrouter.post('/create', async (req: Request, res: Response) => {\n  const { coursepool, user_id, creditsRequired } = req.body;\n\n  try {\n    // Validate input\n    if (\n      !coursepool ||\n      !user_id ||\n      !creditsRequired ||\n      typeof coursepool !== 'string' ||\n      typeof user_id !== 'string' ||\n      typeof creditsRequired !== 'number'\n    ) {\n      res.status(HTTP.BAD_REQUEST).json({\n        error:\n          'Invalid input. Please provide coursepool, user_id, and creditsRequired in valid format.',\n      });\n      return;\n    }\n\n    // Call the service function\n    const newDeficiency = await deficiencyController.createDeficiency(\n      coursepool,\n      user_id,\n      creditsRequired,\n    );\n\n    // Send success response\n    res.status(HTTP.CREATED).json({\n      message: 'Deficiency created successfully.',\n      deficiency: newDeficiency,\n    });\n  } catch (error) {\n    // Handle errors from the service\n    if (error instanceof Error) {\n      res.status(HTTP.FORBIDDEN).json({ error: error.message });\n    } else {\n      const errMsg = 'Internal server error in /deficiency/create';\n      console.error(errMsg, error);\n      res.status(HTTP.SERVER_ERR).json({ error: errMsg });\n    }\n  }\n});\n\nrouter.post('/getAll', async (req: Request, res: Response) => {\n  const { user_id } = req.body;\n\n  try {\n    // Validate input\n    if (!user_id || typeof user_id !== 'string') {\n      res.status(HTTP.BAD_REQUEST).json({\n        error: 'Invalid input. Please provide user_id as a string.',\n      });\n      return;\n    }\n\n    // Call the service function\n    const newDeficiency =\n      await deficiencyController.getAllDeficienciesByUser(user_id);\n\n    // Send success response\n    res.status(HTTP.OK).json({\n      message: 'Deficiency read successfully.',\n      deficiency: newDeficiency,\n    });\n  } catch (error) {\n    // Handle errors from the service\n    if (error instanceof Error) {\n      res.status(HTTP.FORBIDDEN).json({ error: error.message });\n    } else {\n      const errMsg = 'Internal server error in /deficiency/getAll';\n      console.error(errMsg, error);\n      res.status(HTTP.SERVER_ERR).json({ error: errMsg });\n    }\n  }\n});\n\nrouter.post('/delete', async (req: Request, res: Response) => {\n  const { coursepool, user_id } = req.body;\n\n  try {\n    // Validate input\n    if (\n      !coursepool ||\n      !user_id ||\n      typeof coursepool !== 'string' ||\n      typeof user_id !== 'string'\n    ) {\n      res.status(HTTP.BAD_REQUEST).json({\n        error: 'Invalid input. Please provide id as a string.',\n      });\n      return;\n    }\n\n    // Call the service function\n    await deficiencyController.deleteDeficiencyByCoursepoolAndUserId(\n      coursepool,\n      user_id,\n    );\n\n    // Send success response\n    res.status(HTTP.OK).json({\n      message: 'Deficiency deleted successfully.',\n    });\n  } catch (error) {\n    // Handle errors from the service\n    if (\n      error instanceof Error &&\n      error.message === 'Deficiency with this id does not exist.'\n    ) {\n      res.status(HTTP.FORBIDDEN).json({ error: error.message });\n    } else {\n      const errMsg = 'Internal server error in /deficiency/delete';\n      console.error(errMsg, error);\n      res.status(HTTP.SERVER_ERR).json({ error: errMsg });\n    }\n  }\n});\n\nexport default router;\n"]}