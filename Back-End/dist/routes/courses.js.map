{"version":3,"file":"courses.js","sourceRoot":"","sources":["../../routes/courses.ts"],"names":[],"mappings":"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","sourcesContent":["import express, { Request, Response } from 'express';\nimport courseController from '@controllers/courseController/courseController';\nimport CourseTypes from '@controllers/courseController/course_types';\nimport HTTP from '@Util/HTTPCodes';\n\nconst ERROR_MESSAGE = {\n  NO_COURSE_FOUND: 'No courses found',\n  GET_ALL_COURSE: 'Error in /courses/getAll',\n  RETRIEVE_COURSE: 'Could not retrieve courses',\n} as const;\nconst router = express.Router();\n\n// Get course by code and number (via request body)\nrouter.post('/get', async (req: Request, res: Response) => {\n  const { code } = req.body;\n\n  if (!code) {\n    res.status(HTTP.BAD_REQUEST).json({ error: 'Course code is required' });\n    return;\n  }\n\n  try {\n    const course = await courseController.getCourseByCode(code);\n\n    if (course) {\n      res.status(HTTP.OK).json(course);\n    } else {\n      res.status(HTTP.NOT_FOUND).json({ error: 'Course not found' });\n    }\n  } catch (error) {\n    console.error('Error in /courses/get', error);\n    res.status(HTTP.SERVER_ERR).json({ error: 'Could not retrieve course' });\n  }\n});\n\n// Remove a course by code and number (via request body)\nrouter.post('/remove', async (req: Request, res: Response) => {\n  const { code } = req.body;\n\n  if (!code) {\n    res.status(HTTP.BAD_REQUEST).json({ error: 'Course code is required' });\n    return;\n  }\n\n  try {\n    const success = await courseController.removeCourse(code);\n\n    if (success) {\n      res.status(HTTP.OK).json({ message: 'Course removed successfully' });\n    } else {\n      res.status(HTTP.NOT_FOUND).json({ error: 'Course not found' });\n    }\n  } catch (error) {\n    console.error('Error in /courses/remove', error);\n    res.status(HTTP.SERVER_ERR).json({ error: 'Could not remove course' });\n  }\n});\n\n// Add a new course (still part of the body)\nrouter.post('/add', async (req: Request, res: Response) => {\n  const courseInfo: CourseTypes.CourseInfo = req.body;\n\n  const courseInfoCorrect =\n    courseInfo.code &&\n    courseInfo.credits &&\n    courseInfo.offeredIn &&\n    courseInfo.description &&\n    courseInfo.title;\n\n  if (!courseInfo || !courseInfoCorrect) {\n    res.status(HTTP.BAD_REQUEST).json({ error: 'Course data is required' });\n    return;\n  }\n\n  try {\n    const result = await courseController.addCourse(courseInfo);\n    res.status(HTTP.CREATED).json(result);\n  } catch (error) {\n    console.error('Error in /courses/add', error);\n    res.status(HTTP.SERVER_ERR).json({ error: 'Could not add course' });\n  }\n});\n\n// Fetch all courses\nrouter.post('/getAll', async (req: Request, res: Response) => {\n  try {\n    const courses = await courseController.getAllCourses();\n\n    if (courses && courses.length > 0) {\n      res.status(HTTP.OK).json(courses);\n    } else {\n      res.status(HTTP.NOT_FOUND).json({ error: ERROR_MESSAGE.NO_COURSE_FOUND });\n    }\n  } catch (error) {\n    console.error(ERROR_MESSAGE.GET_ALL_COURSE, error);\n    res.status(HTTP.SERVER_ERR).json({ error: ERROR_MESSAGE.RETRIEVE_COURSE });\n  }\n});\n\nrouter.post('/getByDegreeGrouped', async (req: Request, res: Response) => {\n  const { degree } = req.body;\n\n  if (!degree) {\n    res.status(HTTP.BAD_REQUEST).json({ error: 'Degree is required' });\n    return;\n  }\n\n  try {\n    const courses = await courseController.getCoursesByDegreeGrouped(degree);\n\n    if (courses && courses.length > 0) {\n      res.status(HTTP.OK).json(courses);\n    } else {\n      res.status(HTTP.NOT_FOUND).json({ error: ERROR_MESSAGE.NO_COURSE_FOUND });\n    }\n  } catch (error) {\n    console.error('Error in /courses/getByDegree', error);\n    res.status(HTTP.SERVER_ERR).json({ error: ERROR_MESSAGE.RETRIEVE_COURSE });\n  }\n});\n\nrouter.post('/getAllCourses', async (req: Request, res: Response) => {\n  try {\n    const courses = await courseController.getAllCoursesInDB();\n\n    if (courses && courses.length > 0) {\n      res.status(HTTP.OK).json(courses);\n    } else {\n      res.status(HTTP.NOT_FOUND).json({ error: ERROR_MESSAGE.NO_COURSE_FOUND });\n    }\n  } catch (error) {\n    console.error(ERROR_MESSAGE.GET_ALL_COURSE, error);\n    res.status(HTTP.SERVER_ERR).json({ error: ERROR_MESSAGE.RETRIEVE_COURSE });\n  }\n});\n\nexport default router;\n"]}