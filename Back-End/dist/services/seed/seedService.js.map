{"version":3,"file":"seedService.js","sourceRoot":"","sources":["../../../services/seed/seedService.ts"],"names":[],"mappings":"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","sourcesContent":["import fs from 'node:fs';\nimport path from 'node:path';\nimport { readdir } from 'node:fs/promises';\nimport { Course } from '../../models/Course';\nimport { Degree } from '../../models/Degree';\nimport * as Sentry from '@sentry/node';\n\n// -------------------------------------\n// Data Interfaces\n// -------------------------------------\ninterface Requirement {\n  poolId: string;\n  poolName: string;\n  creditsRequired: number;\n  courseCodes: string[];\n}\n\ninterface DegreeData {\n  degreeId: string;\n  degreeName: string;\n  totalCredits: number;\n  requirements: Requirement[];\n  isAddon: boolean;\n}\n\ninterface CourseJson {\n  title: string;\n  credits?: number;\n  description?: string;\n  prerequisites?: string;\n  corequisites?: string;\n  offeredIn?: string[];\n}\n\n// -------------------------------------\n// Parse Requirements File\n// -------------------------------------\nfunction parseRequirementsFile(filePath: string): DegreeData {\n  const text = fs.readFileSync(filePath, 'utf-8');\n  const lines = text.split('\\n').map((l) => l.trim());\n\n  let degreeId = '';\n  let degreeName = '';\n  let totalCredits = 120;\n  let isAddon = false;\n  const requirements: Requirement[] = [];\n  let currentPoolName = '';\n  let currentCredits = 0;\n  let currentCourseCodes: string[] = [];\n\n  function pushCurrentPool() {\n    if (currentPoolName) {\n      const uniquePoolName = `${degreeId} - ${currentPoolName}`;\n      requirements.push({\n        poolId: uniquePoolName\n          .toLowerCase()\n          .replaceAll(/[^a-z0-9]+/g, '-')\n          .replaceAll('-credits', ''),\n        poolName: uniquePoolName,\n        creditsRequired: currentCredits,\n        courseCodes: currentCourseCodes.filter(Boolean),\n      });\n    }\n  }\n\n  function processConfigLine(line: string) {\n    if (line.includes('DegreeID=')) {\n      degreeId = line.split('=')[1].trim();\n      return true;\n    }\n    if (line.includes('DegreeName=')) {\n      degreeName = line.split('=')[1].trim();\n      return true;\n    }\n    if (line.includes('TotalCredits=')) {\n      totalCredits = Number.parseFloat(line.split('=')[1].trim());\n      return true;\n    }\n    if (line.includes('Addon')) {\n      isAddon = true;\n      return true;\n    }\n    return false;\n  }\n\n  function processBracketLine(line: string) {\n    const bracketRegex = /^\\[(.*)\\]$/;\n    const bracketMatch = bracketRegex.exec(line);\n    if (bracketMatch) {\n      pushCurrentPool();\n      currentPoolName = bracketMatch[1];\n      currentCourseCodes = [];\n      const creditsRegex = /\\(([\\d.]+)\\s*credits?\\)/i;\n      const creditsMatch = creditsRegex.exec(currentPoolName);\n      currentCredits = creditsMatch ? Number.parseFloat(creditsMatch[1]) : 0;\n      return true;\n    }\n    return false;\n  }\n\n  for (const line of lines) {\n    if (!line || line.startsWith('#')) continue;\n\n    if (processConfigLine(line)) continue;\n    if (processBracketLine(line)) continue;\n\n    currentCourseCodes.push(line);\n  }\n\n  pushCurrentPool();\n  return { degreeId, degreeName, totalCredits, requirements, isAddon };\n}\n\n// -------------------------------------\n// Load Course JSONs\n// -------------------------------------\nfunction loadAllCourseJsons(dirPath: string): Map<string, CourseJson> {\n  const courseMap = new Map<string, CourseJson>();\n\n  function recurseDirectory(currentPath: string) {\n    const entries = fs.readdirSync(currentPath, { withFileTypes: true });\n    for (const entry of entries) {\n      const fullPath = path.join(currentPath, entry.name);\n      if (entry.isDirectory()) {\n        recurseDirectory(fullPath);\n      } else if (entry.isFile() && entry.name.toLowerCase().endsWith('.json')) {\n        try {\n          const raw = fs.readFileSync(fullPath, 'utf-8');\n          const data: CourseJson[] = JSON.parse(raw);\n          for (const c of data) {\n            const code = extractCodeFromTitle(c.title).toUpperCase();\n            if (courseMap.has(code)) {\n              console.warn(\n                `Warning: Duplicate course code \"${code}\" found in file ${fullPath}. Overwriting.`,\n              );\n            }\n            courseMap.set(code, c);\n          }\n        } catch (err) {\n          Sentry.captureException({\n            error: `Error parsing JSON file: ${fullPath}`,\n          });\n          console.error(`Error parsing JSON file: ${fullPath}`, err);\n        }\n      }\n    }\n  }\n\n  recurseDirectory(dirPath);\n  return courseMap;\n}\n\nfunction extractCodeFromTitle(title: string): string {\n  const titleRegex = /^([A-Z]{2,4})\\s*(\\d{3})/;\n  const match = titleRegex.exec(title);\n  if (!match) throw new Error(`Invalid course title format: \"${title}\"`);\n  return `${match[1]}${match[2]}`.toUpperCase();\n}\n\n// isValidCourseCode checks if the code matches patterns like \"CS101\" or \"MATH240\"\nfunction isValidCourseCode(code: string): boolean {\n  return /^[A-Z]{2,4}\\d{3}$/.test(code);\n}\n// isCreditRequirement checks if the code matches patterns like \"60CR\"\nfunction isCreditRequirement(code: string): boolean {\n  return /^\\d+CR$/i.test(code);\n}\n\n// -------------------------------------\n// Parse Requisites (Prerequisites/Corequisites)\n// -------------------------------------\nfunction parseRequisites(requisiteStr: string | undefined): string[] {\n  if (!requisiteStr) return [];\n  if (typeof requisiteStr !== 'string') {\n    console.warn(\n      `Expected string for requisites but got ${typeof requisiteStr}. Skipping.`,\n    );\n    return [];\n  }\n\n  const cleanedStr = requisiteStr.replaceAll(/[;.]/g, ',');\n  const parts = cleanedStr\n    .split(',')\n    .map((part) => part.trim())\n    .filter(Boolean);\n\n  const requisites: string[] = [];\n\n  function processCode(code: string): void {\n    const normalizedCode = code.replaceAll(/\\s+/g, '').toUpperCase();\n    if (isValidCourseCode(normalizedCode)) {\n      requisites.push(normalizedCode);\n    } else if (!isCreditRequirement(normalizedCode)) {\n      console.warn(\n        `Invalid course code \"${normalizedCode}\" in requisites. Skipping.`,\n      );\n    }\n  }\n\n  function processAlternatives(part: string): void {\n    const alternatives = part.split('/').map((c) => c.trim());\n    for (const alt of alternatives) {\n      processCode(alt);\n    }\n  }\n\n  for (const part of parts) {\n    if (part.includes('/')) {\n      processAlternatives(part);\n    } else {\n      processCode(part);\n    }\n  }\n\n  return requisites;\n}\n\n// -------------------------------------\n// Upsert Course\n// -------------------------------------\nasync function upsertCourse(\n  code: string,\n  title: string,\n  credits: number,\n  description: string,\n  offeredIn: string[],\n  prerequisites: string[],\n  corequisites: string[],\n): Promise<void> {\n  try {\n    await Course.findByIdAndUpdate(\n      code,\n      {\n        _id: code,\n        title,\n        credits,\n        description,\n        offeredIn,\n        prerequisites,\n        corequisites,\n      },\n      { upsert: true, new: true },\n    );\n    console.log(`Upserted Course: ${code}`);\n  } catch (error) {\n    console.error(`Error upserting course ${code}:`, error);\n    throw error;\n  }\n}\n\n// -------------------------------------\n// Upsert Degree with Embedded Course Pools\n// -------------------------------------\nasync function upsertDegree(\n  degreeId: string,\n  degreeName: string,\n  totalCredits: number,\n  isAddon: boolean,\n  requirements: Requirement[],\n): Promise<void> {\n  try {\n    const coursePools = requirements.map((req) => {\n      const courses: string[] = [];\n\n      for (const codeStr of req.courseCodes) {\n        if (!codeStr) continue;\n\n        // Handle alternatives (comma or slash separated)\n        if (codeStr.includes(',') || codeStr.includes('/')) {\n          const separator = codeStr.includes('/') ? '/' : ',';\n          const alternatives = codeStr\n            .split(separator)\n            .map((c) => c.trim().toUpperCase().replaceAll(/\\s+/g, ''));\n          courses.push(\n            ...alternatives.filter((c) => /^[A-Z]{2,4}\\d{3}$/.test(c)),\n          );\n        } else {\n          const code = codeStr.toUpperCase().replaceAll(/\\s+/g, '');\n          // Only add valid course codes (skip credit requirements like \"60CR\")\n          if (/^[A-Z]{2,4}\\d{3}$/.test(code)) {\n            courses.push(code);\n          }\n        }\n      }\n\n      return {\n        id: req.poolId,\n        name: req.poolName,\n        creditsRequired: req.creditsRequired,\n        courses: [...new Set(courses)], // Remove duplicates\n      };\n    });\n\n    await Degree.findByIdAndUpdate(\n      degreeId,\n      {\n        _id: degreeId,\n        name: degreeName,\n        totalCredits,\n        isAddon,\n        coursePools,\n      },\n      { upsert: true, new: true },\n    );\n    console.log(`Upserted Degree: ${degreeName} (${degreeId})`);\n  } catch (error) {\n    console.error(`Error upserting degree ${degreeId}:`, error);\n    throw error;\n  }\n}\n\n// -------------------------------------\n// Main Seed Function\n// -------------------------------------\nexport async function seedDatabase(): Promise<void> {\n  try {\n    console.log('[SEED] Starting database seeding...');\n\n    // 1. Define paths\n    const requirementsDir = path.join(\n      __dirname,\n      '../../course-data/degree-reqs',\n    );\n    const courseListsDir = path.join(\n      __dirname,\n      '../../course-data/course-lists/updated_courses',\n    );\n\n    // 2. Load all course JSONs\n    console.log('[SEED] Loading course data...');\n    const courseMap = loadAllCourseJsons(courseListsDir);\n    console.log(`[SEED] Loaded ${courseMap.size} courses`);\n\n    // 3. Upsert all courses\n    console.log('[SEED] Upserting courses...');\n    for (const [code, courseData] of courseMap.entries()) {\n      const title = courseData.title;\n      const credits = courseData.credits ?? 3;\n      const description =\n        courseData.description ?? `No description for ${code}`;\n      const offeredIn = courseData.offeredIn ?? [];\n      const prerequisites = parseRequisites(courseData.prerequisites);\n      const corequisites = parseRequisites(courseData.corequisites);\n\n      await upsertCourse(\n        code,\n        title,\n        credits,\n        description,\n        offeredIn,\n        prerequisites,\n        corequisites,\n      );\n    }\n    console.log('[SEED] All courses upserted successfully');\n\n    // 4. Read all requirement files\n    console.log('[SEED] Loading degree requirements...');\n    const files = await readdir(requirementsDir);\n    const requirementFiles = files.filter((file) => file.endsWith('.txt'));\n\n    if (requirementFiles.length === 0) {\n      console.warn('[SEED] No requirement files found');\n      return;\n    }\n\n    // 5. Upsert all degrees\n    console.log('[SEED] Upserting degrees...');\n    for (const file of requirementFiles) {\n      const filePath = path.join(requirementsDir, file);\n      console.log(`[SEED] Processing: ${file}`);\n\n      const { degreeId, degreeName, totalCredits, requirements, isAddon } =\n        parseRequirementsFile(filePath);\n\n      await upsertDegree(\n        degreeId,\n        degreeName,\n        totalCredits,\n        isAddon,\n        requirements,\n      );\n    }\n\n    console.log('[SEED] Database seeding completed successfully!');\n  } catch (error) {\n    Sentry.captureException(error);\n    console.error('[SEED] Error during database seeding:', error);\n    throw error;\n  }\n}\n\n// If running from command line: `ts-node seedService.ts`\nif (require.main === module) {\n  (async () => {\n    // NOSONAR - need to use async IIFE here due to top-level await not being supported everywhere\n    try {\n      await seedDatabase();\n      console.log('Seed completed');\n      process.exit(0);\n    } catch (err) {\n      console.error('Seed failed:', err);\n      process.exit(1);\n    }\n  })();\n}\n"]}